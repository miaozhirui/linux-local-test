!function(a,b){"use strict";a(function(a){function c(a,b,c,e){return d(a).then(b,c,e)}function d(a){return a instanceof e?a:f(a)}function e(a,b){this._message=a,this.inspect=b}function f(a){return i(function(b){b(a)})}function g(a){return c(a,m)}function h(){function a(a,e,g){b.resolve=b.resolver.resolve=function(b){return d?f(b):(d=!0,a(b),c)},b.reject=b.resolver.reject=function(a){return d?f(m(a)):(d=!0,e(a),c)},b.notify=b.resolver.notify=function(a){return g(a),a}}var b,c,d;return b={promise:W,resolve:W,reject:W,notify:W,resolver:{resolve:W,reject:W,notify:W}},b.promise=c=i(a),b}function i(a){return j(a,T.PromiseStatus&&T.PromiseStatus())}function j(a,b){function c(a,b,c,d){function e(e){e._message(a,b,c,d)}l?l.push(e):G(function(){e(j)})}function d(){return j?j.inspect():F()}function f(a){if(l){var c=l;l=W,G(function(){j=p(i,a),b&&t(j,b),k(c,j)})}}function g(a){f(m(a))}function h(a){if(l){var b=l;G(function(){k(b,o(a))})}}var i,j,l=[];i=new e(c,d),i._status=b;try{a(f,g,h)}catch(n){g(n)}return i}function k(a,b){for(var c=0;c<a.length;c++)a[c](b)}function l(a){return n(new r(a),function(){return D(a)})}function m(a){return n(new s(a),function(){return E(a)})}function n(a,b){return new e(function(b,c,d){try{d(a[b].apply(a,c))}catch(e){d(m(e))}},b)}function o(a){return new e(function(b,c,d,e){var f=c[2];try{e("function"==typeof f?f(a):a)}catch(g){e(g)}})}function p(a,b){if(b===a)return m(new TypeError);if(b instanceof e)return b;try{var c=b===Object(b)&&b.then;return"function"==typeof c?q(c,b):l(b)}catch(d){return m(d)}}function q(a,b){return i(function(c,d){M(a,b,c,d)})}function r(a){this.value=a}function s(a){this.reason=a}function t(a,b){function c(){b.fulfilled()}function d(a){b.rejected(a)}a.then(c,d)}function u(a){return a&&"function"==typeof a.then}function v(a,b,d,e,f){return c(a,function(a){function g(d,e,f){function g(a){n(a)}function h(a){m(a)}var i,j,k,l,m,n,o,p;if(o=a.length>>>0,i=Math.max(0,Math.min(b,o)),k=[],j=o-i+1,l=[],i)for(n=function(a){l.push(a),--j||(m=n=I,e(l))},m=function(a){k.push(a),--i||(m=n=I,d(k))},p=0;o>p;++p)p in a&&c(a[p],h,g,f);else d(k)}return i(g).then(d,e,f)})}function w(a,b,c,d){function e(a){return b?b(a[0]):a[0]}return v(a,1,e,c,d)}function x(a,b,c,d){return B(a,I).then(b,c,d)}function y(){return B(arguments,I)}function z(a){return B(a,D,E)}function A(a,b){return B(a,b)}function B(a,b,d){return c(a,function(a){function e(e,f,g){function h(a,h){c(a,b,d).then(function(a){i[h]=a,--k||e(i)},f,g)}var i,j,k,l;if(k=j=a.length>>>0,i=[],!k)return void e(i);for(l=0;j>l;l++)l in a?h(a[l],l):--k}return j(e)})}function C(a,b){var d=M(L,arguments,1);return c(a,function(a){var e;return e=a.length,d[0]=function(a,d,f){return c(a,function(a){return c(d,function(c){return b(a,c,f,e)})})},K.apply(a,d)})}function D(a){return{state:"fulfilled",value:a}}function E(a){return{state:"rejected",reason:a}}function F(){return{state:"pending"}}function G(a){1===O.push(a)&&N(H)}function H(){k(O),O=[]}function I(a){return a}function J(a){throw"function"==typeof T.reportUnhandled?T.reportUnhandled():G(function(){throw a}),a}c.promise=i,c.resolve=f,c.reject=g,c.defer=h,c.join=y,c.all=x,c.map=A,c.reduce=C,c.settle=z,c.any=w,c.some=v,c.isPromise=u,c.isPromiseLike=u,e.prototype={then:function(){var a,b;return a=arguments,b=this._message,j(function(c,d,e){b("when",a,c,e)},this._status&&this._status.observed())},otherwise:function(a){return this.then(W,a)},ensure:function(a){function b(){return f(a())}return"function"==typeof a?this.then(b,b)["yield"](this):this},done:function(a,b){this.then(a,b).otherwise(J)},"yield":function(a){return this.then(function(){return a})},tap:function(a){return this.then(a)["yield"](this)},spread:function(a){return this.then(function(b){return x(b,function(b){return a.apply(W,b)})})},always:function(a,b){return this.then(a,a,b)}},r.prototype.when=function(a){return"function"==typeof a?a(this.value):this.value},s.prototype.when=function(a,b){if("function"==typeof b)return b(this.reason);throw this.reason};var K,L,M,N,O,P,Q,R,S,T,U,V,W;if(U=a,O=[],P=b.setTimeout,T="undefined"!=typeof console?console:c,"object"==typeof process&&process.nextTick)N=process.nextTick;else if(V=b.MutationObserver||b.WebKitMutationObserver)N=function(a,b,c){var d=a.createElement("div");return new b(c).observe(d,{attributes:!0}),function(){d.setAttribute("x","x")}}(document,V,H);else try{N=U("vertx").runOnLoop||U("vertx").runOnContext}catch(X){N=function(a){P(a,0)}}return Q=Function.prototype,R=Q.call,M=Q.bind?R.bind(R):function(a,b){return a.apply(b,L.call(arguments,2))},S=[],L=S.slice,K=S.reduce||function(a){var b,c,d,e,f;if(f=0,b=Object(this),e=b.length>>>0,c=arguments,c.length<=1)for(;;){if(f in b){d=b[f++];break}if(++f>=e)throw new TypeError}else d=c[1];for(;e>f;++f)f in b&&(d=a(d,b[f],f,b));return d},c})}("function"==typeof define?define:function(a){module.exports=a(require)},this);